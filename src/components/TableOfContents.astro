---
interface TocProps {
  headings: {
    depth: number;
    slug: string;
    text: string;
  }[];
}

const { headings } = Astro.props;

// 过滤掉 h4/h5/h6，如果你想显示可以删除 depth 限制
const filtered = headings.filter((h) => h.depth <= 4);
---
{filtered.length > 0 &&
<nav class="toc mx-4 my-4 p-4 bg-gray-200 ">
  <h2 class="toc-title">目录</h2>
  <ul>
    {filtered.map((h) => (
      <p class={`depth-${h.depth} hover:underline`}>
        `` <a href={`#${h.slug}`}>{h.text}</a>
      </p>
    ))}
  </ul>
</nav>}


<style>

  .toc {
    padding: 1rem;
    border-left: 4px solid var(--color-accent);
    border-radius: 6px;
  }
  .light .toc {
  background-color: #9e9e9e;
}
  .toc-title {
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: black;
  }
  .toc ul {
    list-style: none;
    padding-left: 0;
  }
  .toc p {
    margin: 4px 0;
    color: black;
  }
  .toc p.depth-3 {
    margin-left: 1rem;
  }
  .toc p.depth-4 {
    margin-left: 2.5rem;
  }
</style>
